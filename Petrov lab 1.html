<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Лаба 1</title>
  <style>
    body{
      margin: 0;
      overflow: hidden;
    }
  </style>

</head>
<body>
  <script type="text/javascript" language="JavaScript1.5" src="https://rawgit.com/Vasilui/habrahabr/master/WebGL_Three.js/libs/three.js"></script>
  <script type="text/javascript" language="JavaScript1.5" src="https://rawgit.com/Vasilui/habrahabr/master/WebGL_Three.js/libs/AsciiEffect.js"></script>
  <script type="text/javascript" language="JavaScript1.5" src="https://rawgit.com/Vasilui/habrahabr/master/WebGL_Three.js/libs/stats.js"></script>
  <script type="text/javascript" language="JavaScript1.5" src="https://rawgit.com/Vasilui/habrahabr/master/WebGL_Three.js/libs/dat.gui.js"></script>
  <div id="WebGL-output"></div>
</body>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script>
  $(function () {

          var stats = initStats();

          // create a scene, that will hold all our elements such as objects, cameras and lights.
          var scene = new THREE.Scene();

          // create a camera, which defines where we're looking at.
          var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);

          // create a render and set the size
          var renderer = new THREE.WebGLRenderer();

          renderer.setClearColorHex(0x388E3C, 1.0);
          renderer.setSize(window.innerWidth, window.innerHeight);
          renderer.shadowMapEnabled = true;

          // create the ground plane
          var planeGeometry = new THREE.PlaneGeometry(60,20,1,1);
          var planeMaterial =    new THREE.MeshLambertMaterial({color: 0xffffff});
          var plane = new THREE.Mesh(planeGeometry,planeMaterial);
          plane.receiveShadow  = true;

          // rotate and position the plane
          plane.rotation.x=-0.5*Math.PI;
          plane.position.x=15
          plane.position.y=0
          plane.position.z=0

          // add the plane to the scene
          scene.add(plane);

          // create a cube
          var cubeGeometry = new THREE.CubeGeometry(4,4,4);
          var cubeMaterial = new THREE.MeshLambertMaterial({color: 0xff0000});
          var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
          cube.castShadow = true;

          // position the cube
          cube.position.x=-4;
          cube.position.y=3;
          cube.position.z=0;

          // add the cube to the scene
          scene.add(cube);

          

          

         //Teraider to the scene
          var geometry = new THREE.TetrahedronGeometry( 4, 1);
          var material = new THREE.MeshLambertMaterial( {color: 0xD32F2F} );
          var tetrahedron = new THREE.Mesh( geometry, material );
          
         

          tetrahedron.position.x=4;
          tetrahedron.position.y=5;
          tetrahedron.position.z=2;
          tetrahedron.castShadow=true;
          scene.add( tetrahedron );

  


          // position and point the camera to the center of the scene
          camera.position.x = -30;
          camera.position.y = 40;
          camera.position.z = 30;
          camera.lookAt(scene.position);

          // add subtle ambient lighting
          var ambientLight = new THREE.AmbientLight(0x0c0c0c);
          scene.add(ambientLight);

          // add spotlight for the shadows
          var spotLight = new THREE.SpotLight( 0xffffff );
          spotLight.position.set( -40, 60, -10 );
          spotLight.castShadow = true;
          scene.add( spotLight );

          // add the output of the renderer to the html element
          $("#WebGL-output").append(renderer.domElement);

          // call the render function
          var step=0;
          var ims=0;
          var rew=0;
          var cub=0;

          var controls = new function() {
              this.rotationSpeed = 0.02;
              this.bouncingSpeed = 0.03;
              
          }

          var gui = new dat.GUI();
          gui.add(controls, 'rotationSpeed',0,0.5);
          gui.add(controls, 'bouncingSpeed',0,0.5);
          

          render();

          function render() {
              stats.update();
              // rotate the cube around its axes
              cube.rotation.x += controls.rotationSpeed;
              cube.rotation.y += controls.rotationSpeed;
              cube.rotation.z += controls.rotationSpeed;
			  
			  
			  tetrahedron.rotation.x += controls.rotationSpeed;
              tetrahedron.rotation.y += controls.rotationSpeed;
              tetrahedron.rotation.z += controls.rotationSpeed;

               

             
              tetrahedron.position.y = 20+( 10*(Math.sin(cub)));

             

              
              // render using requestAnimationFrame
              requestAnimationFrame(render);
              renderer.render(scene, camera);
          }

          function initStats() {

              var stats = new Stats();

              stats.setMode(0); // 0: fps, 1: ms

              // Align top-left
              stats.domElement.style.position = 'absolute';
              stats.domElement.style.left = '0px';
              stats.domElement.style.top = '0px';

              $("#Stats-output").append( stats.domElement );

              return stats;
          }
      });
  </script>
</html>
